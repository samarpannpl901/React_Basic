<!DOCTYPE html>
<html>

<head>
    <!--"StAuth10244: I Samarpan Nepal, 000933008 certify that this material is my original work.
      No other person's work has been used without due acknowledgement.
     I have not made my work available to anyone else."-->
    <meta charset="UTF-8" />
    <title>Deck of Cards</title>

    <!-- React and Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>


    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #6143435d;
            color: #f8fafc;
            text-align: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            margin-bottom: 20px;
        }

        /* Deck box */
        #deck {
            width: 200px;
            height: 280px;
            background-color: #91414182;
            border: 2px solid #76c02c;
            border-radius: 12px;
            display: flex;
            align-items: center;
            font-size: 60px;
            justify-content: center;
            margin: 20px auto;
        }

        /* Buttons layout */
        div button {
            background-color: #00e9fe;
            border: 1px solid #334155;
            color: #b75e5e;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
        }

        button:hover {
            background-color: #f3f3f3;
        }

        .card {
            display: inline-block;
            background: white;
            border: 2px solid black;
            border-radius: 8px;
            padding: 20px 25px;
            margin: 8px;
            font-weight: bold;
            font-size: 22px;
            cursor: pointer;
            user-select: none;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
        }


        .picked {
            border: 3px solid #00e9fe;
            box-shadow: 0 0 10px #00e9fe;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">

        // card component
        function Card({ suit, value, picked, onClick }) {
            return (
                <span
                    className={`card ${picked ? "picked" : ""}`}
                    onClick={onClick}
                    style={{
                        color: suit === "♥" || suit === "♦" ? "red" : "black"
                    }}
                >
                    {value} {suit}
                </span>
            );
        }

        function MyApp() {
            // Created a variable for the text on the deck
            const [message, setMessage] = React.useState("deck");

            // array for showing cards
            const [cardsText, setCardsText] = React.useState([]);

            // array of suits and values
            const suits = ["♥", "♦", "♣", "♠"];
            const values = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"];

            // create all 52 cards
            function makeFullDeck() {
                const allCards = [];
                for (let s of suits) {
                    for (let v of values) {
                        allCards.push({ suit: s, value: v });
                    }
                }
                return allCards;
            }

            // for the 52 card in the deck
            const [deck, setDeck] = React.useState(makeFullDeck());

            // Function to get a random item from the array
            function randomIndex(array) {
                return Math.floor(Math.random() * array.length);
            }

            // creat a function that will run when i click the deck
            function handleDeckClick() {
                if (deck.length === 0) {
                    setMessage("No cards remaining");
                    return;
                }

                const index = randomIndex(deck);
                const card = deck[index];
                const newDeck = [...deck];
                newDeck.splice(index, 1); // remove card from deck

                setDeck(newDeck);
                setCardsText([...cardsText, card]);
                setMessage(card.value + card.suit);
            }
            // function for dealing the cards
            function dealCards(amount) {
                if (deck.length < amount) {
                    setMessage("Not enough cards left!");
                    return;
                }

                const newDeck = [...deck];
                const chosenCards = [];

                for (let i = 0; i < amount; i++) {
                    const index = randomIndex(newDeck);
                    chosenCards.push(newDeck[index]);
                    newDeck.splice(index, 1);
                }

                setDeck(newDeck);
                setCardsText(chosenCards);
                setMessage("Deck");
            }

            // function for reset all the deta
            function resetDeck() {
                setDeck(makeFullDeck());  // refill 52 cards
                setCardsText([]);         // clear drawn cards
                setMessage("Deck");       // reset deck label
            }

            const [pickedIdx, setPickedIdx] = React.useState(null);
            
            // function to swap the cards
            function handleCardClick(index) {
                if (pickedIdx === null) {
                    // Nothing selected yet pick this one
                    setPickedIdx(index);
                } else if (pickedIdx === index) {
                    // Clicked same card unpick
                    setPickedIdx(null);
                } else {
                    // Different card clicked while one picked swap them
                    const newCards = [...cardsText];
                    [newCards[pickedIdx], newCards[index]] = [newCards[index], newCards[pickedIdx]];
                    setCardsText(newCards);
                    setPickedIdx(null);
                }
            }
            // function to toss the card
            function tossCard() {
                if (pickedIdx === null) {
                    alert("Select a card to toss!");
                    return;
                }

                const newCards = [...cardsText];
                newCards.splice(pickedIdx, 1);

                setCardsText(newCards);
                setPickedIdx(null);
            }





            return (
                <div>
                    <h1>Deck of Cards</h1>
                    {/* Deck placeholder*/}
                    <div id="deck" onClick={handleDeckClick}>{message}</div>
                    {/* 6 button*/}
                    <div>
                        <button onClick={() => dealCards(5)} >Deal 5</button>
                        <button onClick={() => dealCards(7)} >Deal 7</button>
                        <button onClick={resetDeck}>Reset</button>
                        <button onClick={tossCard}>Toss</button>
                        <button>Wildcard</button>
                        <button>Regroup</button>
                    </div>
                    <div>
                        {cardsText.length === 0 ? (
                            <p>No cards dealt yet</p>
                        ) : (
                            cardsText.map((c, i) => (
                                <Card
                                    key={i}
                                    suit={c.suit}
                                    value={c.value}
                                    picked={pickedIdx === i}
                                    onClick={() => handleCardClick(i)}
                                />
                            ))
                        )}

                    </div>
                </div>

            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<MyApp />);

    </script>
</body>

</html>